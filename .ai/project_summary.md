# Обзор проекта "Playmatch"

## Идея

Сервис для поиска напарников в кооперативных играх. Ключевая идея — создать платформу, независимую от конкретной игры, где пользователи могут находить друг друга на основе общих интересов и репутации.

Полное видение проекта описано в файле [readme.md](../readme.md).
План реализации бэкенда описан в [plan.md](../plan.md).

## Реализованные функции

На данный момент реализовано ядро сервиса:

1.  **Система пользователей:**
    *   Регистрация (`/auth/register`)
    *   Аутентификация по логину/почте и паролю (`/auth/login`)
    *   Получение данных о себе (`/users/me`), других пользователях (`/users/:id`).
    *   Поиск пользователей по никнейму с пагинацией (`/users`).

2.  **Система друзей и подписок:**
    *   Отправка заявок в друзья (подписка).
    *   Принятие/отклонение заявок.
    *   Удаление из друзей или отмена своей заявки.
    *   В профиле пользователя отображается количество друзей, подписчиков и подписок, а также статус отношений с текущим зрителем.
    *   Получение списков входящих/исходящих связей (заявок, друзей) для себя (`/users/me/relations`) и для любого пользователя (`/users/:id/relations`).

3.  **Управление тегами (для игр):**
    *   CRUD-операции для тегов (`/admin/tags`), доступны только администраторам.

4.  **Управление играми:**
    *   CRUD-операции для игр (`/admin/games`), доступны только администраторам.
    *   Публичные методы для получения списка игр с пагинацией и поиска по названию/тегам (`/games`).
    *   Публичный метод для получения игры по ID (`/games/:id`).

5.  **Система ролей:**
    *   Пользователи имеют роль (`user` или `admin`).
    *   Административные эндпоинты защищены middleware, проверяющим роль пользователя.

6.  **Дополнительные утилиты:**
    *   **API-документация:** Реализована через Swagger (OpenAPI), доступна по адресу `/swagger/index.html`.
    *   **Просмотр БД:** Интегрирован Adminer для удобного просмотра и управления базой данных через браузер (`http://localhost:8081`).

## Исправленные ошибки

*   **Логирование GORM:** Настроено игнорирование сообщений "record not found" в логах, что делает вывод чище.
*   **Подсчет друзей (`friends_count`):** Исправлена логика подсчета, теперь счетчик друзей является симметричным и корректно отображает взаимные отношения.
*   **Генерация Swagger:** Исправлена ошибка парсинга моделей GORM путем использования DTO (`TagResponse`).
